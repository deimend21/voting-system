<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n-key="pageTitle">假如少数服从多数 - 实时投票系统</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- 星空背景 -->
    <div class="stars" id="stars"></div>

    <!-- 语言选择模态框 -->
    <div id="lang-modal" class="modal">
        <div class="modal-content">
            <h2>选择语言 / Select Language</h2>
            <div class="lang-buttons">
                <button id="lang-zh" class="lang-btn">简体中文</button>
                <button id="lang-en" class="lang-btn">English</button>
            </div>
        </div>
    </div>

    <!-- 主容器 (默认隐藏) -->
    <div class="container" style="display: none;">
        <!-- 标题 -->
        <div class="header">
            <h1 class="title" data-i18n-key="mainTitle">假如少数服从多数</h1>
            <p class="subtitle" data-i18n-key="subtitle">假如 3I-Atlas 是外星飞船...</p>
            <div class="online-status">
                <span class="status-dot" id="statusDot"></span>
                <span id="onlineCount">0</span> <span data-i18n-key="onlineStatus">人在线</span>
            </div>
        </div>

        <!-- 免责声明 -->
        <div class="disclaimer" data-i18n-key="disclaimer">
            ⚠️ 本网站仅为思想实验，旨在探讨民主决策的边界与哲学思考，不代表任何立场。
        </div>

        <!-- 投票区域 -->
        <div id="votingSection">
            <!-- 问题1 -->
            <div class="question-block">
                <h3 class="question-title" data-i18n-key="q1Title">【问题1】你选择？</h3>
                <div class="options">
                    <button class="option-btn" data-question="q1" data-option="arrival">
                        <span class="option-text" data-i18n-key="q1Opt1">降临派</span>
                        <span class="option-icon">🛸</span>
                    </button>
                    <button class="option-btn" data-question="q1" data-option="save">
                        <span class="option-text" data-i18n-key="q1Opt2">拯救派</span>
                        <span class="option-icon">🦸</span>
                    </button>
                </div>
                <div class="result-bar" id="result-q1"></div>
            </div>

            <!-- 问题2 -->
            <div class="question-block">
                <h3 class="question-title" data-i18n-key="q2Title">【问题2】你想选择？</h3>
                <div class="options">
                    <button class="option-btn" data-question="q2" data-option="death">
                        <span class="option-text" data-i18n-key="q2Opt1">死亡</span>
                        <span class="option-icon">💀</span>
                    </button>
                    <button class="option-btn" data-question="q2" data-option="live">
                        <span class="option-text" data-i18n-key="q2Opt2">活着</span>
                        <span class="option-icon">❤️</span>
                    </button>
                </div>
                <div class="result-bar" id="result-q2"></div>
            </div>

            <!-- 问题3 -->
            <div class="question-block">
                <h3 class="question-title" data-i18n-key="q3Title">【问题3】如果可以，你希望？</h3>
                <div class="options">
                    <button class="option-btn" data-question="q3" data-option="exist">
                        <span class="option-text" data-i18n-key="q3Opt1">存在</span>
                        <span class="option-icon">🌍</span>
                    </button>
                    <button class="option-btn" data-question="q3" data-option="extinct">
                        <span class="option-text" data-i18n-key="q3Opt2">灭绝</span>
                        <span class="option-icon">☄️</span>
                    </button>
                </div>
                <div class="result-bar" id="result-q3"></div>
            </div>
        </div>

        <!-- 按钮组 -->
        <div class="button-group">
            <button id="submitBtn" class="submit-btn" disabled data-i18n-key="submitBtn">提交投票</button>
            <button id="resultBtn" class="result-btn" data-i18n-key="resultBtn">查看结果</button>
        </div>

        <!-- 统计 -->
        <div id="stats" class="stats">
            <h3 class="stats-title" data-i18n-key="statsTitle">实时统计</h3>
            <p><span data-i18n-key="totalVotes">总投票人数</span>: <span id="totalVotes" class="total-votes">0</span></p>
        </div>
    </div>

    <!-- 评论区 -->
    <div class="container" id="commentsContainer" style="display: none;">
        <div class="comments-section">
            <h2 class="section-title" data-i18n-key="commentsTitle">评论区</h2>
            <div class="comment-form">
                <input type="text" id="nicknameInput" class="nickname-input" placeholder="输入你的昵称（可选）" maxlength="20" data-i18n-key="nicknamePlaceholder" data-i18n-is-placeholder>
                <textarea id="commentInput" placeholder="留下你的看法..." maxlength="500" data-i18n-key="commentPlaceholder" data-i18n-is-placeholder></textarea>
                <div class="comment-form-footer">
                    <span class="char-count" id="charCount">0</span>/500
                    <button id="submitComment" class="submit-comment-btn" data-i18n-key="submitCommentBtn">发表评论</button>
                </div>
            </div>
            <div class="comments-list" id="commentsList"></div>
            <div class="load-more-container">
                <button id="loadMoreBtn" class="load-more-btn" data-i18n-key="loadMoreBtn">加载更多</button>
            </div>
        </div>
    </div>

    <!-- Toast提示 -->
    <div class="toast" id="toast"></div>

    <!-- 加载指示器 -->
    <div class="loading" id="loading">
        <div class="spinner"></div>
    </div>

    <!-- 引入Socket.IO -->
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
    <script src="js/i18n.js"></script>
    <script src="js/app.js"></script>
</body>
</html>